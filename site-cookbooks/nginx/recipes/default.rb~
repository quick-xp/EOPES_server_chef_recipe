#
# Cookbook Name:: nginx
# Recipe:: default
#
# Copyright 2015, r_nishio
#
package "nginx" do
	action :install
end

service 'nginx' do
	supports :status => true, :restart => true, :reload => true
	action   [:enable, :start]
end

################
#Create Directory
################
#Base Directory
directory node['nginx']['dir'] do
	owner     'root'
	group     'root'
	mode      '0755'
	recursive true
end

#site directory
%w(sites-available sites-enabled conf.d).each do |leaf|
  directory File.join(node['nginx']['dir'], leaf) do
    owner 'root'
    group node['root_group']
    mode  '0755'
  end
end

#Log Directory
directory node['nginx']['log_dir'] do
	mode      '0755'
	owner     node['nginx']['user']
	action    :create
	recursive true
end


